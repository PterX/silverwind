# =============================================================================
# File: openapi_convert.yaml
# Description: OpenAPI spec conversion to routing rules
# =============================================================================
# Demonstrates RESTful API routing patterns converted from OpenAPI spec.
# Shows path+method combinations for CRUD operations.

health_check_log_enabled: false
admin_port: 8870
log_level: debug
servers:
  - listen: 8080
    protocol: http
    routes:
      - matchers:
          - kind: path
            value: /users
            match_type: exact
          - kind: method
            values:
              - GET
        forward_to:
          kind: random
          targets:
            - endpoint: http://user-service.internal:8080
      - matchers:
          - kind: path
            value: /users
            match_type: exact
          - kind: method
            values:
              - POST
        forward_to:
          kind: random
          targets:
            - endpoint: http://user-service.internal:8080
      - matchers:
          - kind: path
            value: ^/users/[^/]+$
            match_type: regex
          - kind: method
            values:
              - GET
        forward_to:
          kind: random
          targets:
            - endpoint: http://user-service.internal:8080
      - matchers:
          - kind: path
            value: ^/users/[^/]+$
            match_type: regex
          - kind: method
            values:
              - PUT
        forward_to:
          kind: random
          targets:
            - endpoint: http://127.0.0.1:8080
      - matchers:
          - kind: path
            value: ^/users/[^/]+$
            match_type: regex
          - kind: method
            values:
              - DELETE
        forward_to:
          kind: random
          targets:
            - endpoint: http://127.0.0.1:8081
