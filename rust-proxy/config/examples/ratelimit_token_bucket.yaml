# =============================================================================
# File: ratelimit_token_bucket.yaml
# Description: Token bucket rate limiting algorithm
# =============================================================================
# Limits request rate using token bucket algorithm.
# Allows bursts up to capacity, then rate limits.

log_level: debug
servers:
  - listen: 8084
    protocol: http
    routes:
      - matchers:
          - kind: path
            value: /api/v1
        forward_to: http://httpbin.org/
        middlewares:
          - kind: rate_limit
            limiter: token_bucket
            capacity: 10
            rate_per_unit: 3
            unit:
              kind: Hour
            scope:
              kind: IP
              value: 127.0.0.1
